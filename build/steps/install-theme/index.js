(()=>{"use strict";const e=window.wp.i18n,t=window.wp.blocks,r=window.wp.primitives,n=window.ReactJSXRuntime,i=(0,n.jsx)(r.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,n.jsx)(r.Path,{d:"M4 20h8v-1.5H4V20zM18.9 3.5c-.6-.6-1.5-.6-2.1 0l-7.2 7.2c-.4-.1-.7 0-1.1.1-.5.2-1.5.7-1.9 2.2-.4 1.7-.8 2.2-1.1 2.7-.1.1-.2.3-.3.4l-.6 1.1H6c2 0 3.4-.4 4.7-1.4.8-.6 1.2-1.4 1.3-2.3 0-.3 0-.5-.1-.7L19 5.7c.5-.6.5-1.6-.1-2.2zM9.7 14.7c-.7.5-1.5.8-2.4 1 .2-.5.5-1.2.8-2.3.2-.6.4-1 .8-1.1.5-.1 1 .1 1.3.3.2.2.3.5.2.8 0 .3-.1.9-.7 1.3z"})}),l=window.wp.blockEditor,o=window.wp.components,a=JSON.parse('{"UU":"playground-step/install-theme","DD":"Install Theme"}'),s=window.wp.htmlEntities,d=window.wp.element,p=(0,n.jsx)(r.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,n.jsx)(r.Path,{d:"M13 5c-3.3 0-6 2.7-6 6 0 1.4.5 2.7 1.3 3.7l-3.8 3.8 1.1 1.1 3.8-3.8c1 .8 2.3 1.3 3.7 1.3 3.3 0 6-2.7 6-6S16.3 5 13 5zm0 10.5c-2.5 0-4.5-2-4.5-4.5s2-4.5 4.5-4.5 4.5 2 4.5 4.5-2 4.5-4.5 4.5z"})}),c=({item:t,onSelect:r,selectedSlug:i})=>{const l=i===t.slug;return(0,n.jsx)(o.Card,{size:"small",children:(0,n.jsxs)(o.CardBody,{style:{padding:"0"},children:[(0,n.jsx)(o.CardMedia,{children:(0,n.jsx)("img",{src:t.screenshot_url})}),(0,n.jsx)(o.CardBody,{children:(0,n.jsxs)(o.__experimentalHStack,{align:"center",children:[(0,n.jsx)(o.__experimentalHeading,{level:5,children:t.name}),(0,n.jsx)(o.Button,{variant:l?"primary":"secondary",style:{borderRadius:"4px"},onClick:()=>r(t.slug),disabled:l,children:l?(0,e.__)("Selected","wp-playground-blueprint-editor"):(0,e.__)("Select","wp-playground-blueprint-editor")})]})})]})},t.slug)},u=({item:t,onSelect:r,selectedSlug:i})=>{const l=i===t.slug;return(0,n.jsx)(o.Card,{size:"small",children:(0,n.jsx)(o.CardBody,{style:{height:"100%"},children:(0,n.jsxs)(o.__experimentalVStack,{justify:"space-between",spacing:4,style:{height:"100%"},children:[(0,n.jsxs)(o.__experimentalVStack,{spacing:4,children:[(0,n.jsxs)(o.__experimentalHStack,{justify:"start",spacing:4,children:[(0,n.jsx)("img",{src:t.icons["1x"]||t.icons.default,alt:`${t.name} Icon`,style:{minWidth:"70px",maxHeight:"70px",objectFit:"contain",borderRadius:"4px"}}),(0,n.jsx)(o.ExternalLink,{href:t.homepage,style:{fontWeight:"bold",color:"#0073aa"},children:(0,s.decodeEntities)(t.name)})]}),(0,n.jsx)(o.__experimentalText,{lineHeight:"1.5em",children:t.short_description||(0,e.__)("No description available","wp-playground-blueprint-editor")}),(0,n.jsxs)(o.__experimentalHStack,{spacing:10,children:[(0,n.jsx)(o.__experimentalText,{color:"#666",children:t.active_installs?`${a=t.active_installs,a>=1e6?a/1e6+"M":a>=1e3?a/1e3+"K":new Intl.NumberFormat("en-IN").format(a)}+ active installations`:(0,e.__)("No data available","wp-playground-blueprint-editor")}),(0,n.jsxs)(o.__experimentalText,{color:"#666",children:[(0,e.__)("Tested with","wp-playground-blueprint-editor")," ",t.tested||(0,e.__)("Unknown","wp-playground-blueprint-editor")]})]})]}),(0,n.jsx)(o.__experimentalHStack,{justify:"right",children:(0,n.jsx)(o.Button,{variant:l?"primary":"secondary",style:{borderRadius:"4px"},onClick:()=>r(t.slug),disabled:l,children:l?(0,e.__)("Selected","wp-playground-blueprint-editor"):(0,e.__)("Select","wp-playground-blueprint-editor")})})]})})},t.slug);var a},h=function({type:t,onSelect:r,selectedSlug:i}){const[l,a]=(0,d.useState)(!1),[s,h]=(0,d.useState)(""),[g,x]=(0,d.useState)([]),[_,m]=(0,d.useState)([]),[y,b]=(0,d.useState)(!1),f=(0,d.useRef)(null),S=async(e="")=>{b(!0);const r=!!e.trim(),n=`https://api.wordpress.org/${t}/info/1.2/?action=query_${t}${r?`&request[search]=${e}`:"&request[popular]=1"}`;try{const e=await fetch(n),i=await e.json();r?x(i[t]||[]):m(i[t]||[])}catch(e){console.error(`Error fetching ${t}:`,e)}finally{b(!1)}};(0,d.useEffect)((()=>{l&&!s&&S()}),[l]),(0,d.useEffect)((()=>()=>{f.current&&clearTimeout(f.current)}),[]);const C=e=>{r(e),a(!1)};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(o.Button,{variant:"secondary",size:"compact",onClick:()=>a(!0),style:{boxShadow:"none"},children:(0,e.__)("Browse","wp-playground-blueprint-editor")}),l&&(0,n.jsx)(o.Modal,{title:(0,e.__)(`Browse ${t[0].toUpperCase()}${t.slice(1)}`,"wp-playground-blueprint-editor"),onRequestClose:()=>a(!1),shouldCloseOnClickOutside:!1,size:"large",style:{height:"70%"},children:(0,n.jsxs)(o.__experimentalVStack,{spacing:6,justify:"space-between",children:[(0,n.jsx)(o.__experimentalInputControl,{__next40pxDefaultSize:!0,placeholder:(0,e.__)("Search by name or author","wp-playground-blueprint-editor"),value:s,onChange:e=>{h(e),f.current&&clearTimeout(f.current),f.current=setTimeout((()=>{e.trim()?S(e):S()}),500)},suffix:(0,n.jsx)(o.Button,{variant:"link",onClick:()=>S(s),disabled:y,style:{textDecoration:"none",color:"#0073aa"},icon:p})}),(0,n.jsx)(o.__experimentalVStack,{children:y?(0,n.jsx)(o.__experimentalGrid,{columns:2,gap:5,children:Array.from({length:4}).map(((e,r)=>"themes"===t?(0,n.jsx)(j,{},r):(0,n.jsx)(w,{},r)))}):(0,n.jsx)(n.Fragment,{children:(s?g:_).length>0?(0,n.jsx)(o.__experimentalGrid,{columns:2,gap:5,children:(s?g:_).map((e=>"themes"===t?(0,n.jsx)(c,{item:e,onSelect:C,selectedSlug:i},e.slug):(0,n.jsx)(u,{item:e,onSelect:C,selectedSlug:i},e.slug)))}):(0,n.jsxs)(o.__experimentalVStack,{justify:"center",align:"center",style:{padding:"40px 0"},children:[(0,n.jsx)(o.__experimentalHeading,{level:4,children:(0,e.__)("No results found","wp-playground-blueprint-editor")}),(0,n.jsx)(o.__experimentalText,{color:"#666",children:s?(0,e.__)(`No ${t} found matching your search.`,"wp-playground-blueprint-editor"):(0,e.__)(`No ${t} available.`,"wp-playground-blueprint-editor")})]})})})]})})]})},g=window.React,x=g.createContext({}),_=!0;function m({baseColor:e,highlightColor:t,width:r,height:n,borderRadius:i,circle:l,direction:o,duration:a,enableAnimation:s=_,customHighlightBackground:d}){const p={};return"rtl"===o&&(p["--animation-direction"]="reverse"),"number"==typeof a&&(p["--animation-duration"]=`${a}s`),s||(p["--pseudo-element-display"]="none"),"string"!=typeof r&&"number"!=typeof r||(p.width=r),"string"!=typeof n&&"number"!=typeof n||(p.height=n),"string"!=typeof i&&"number"!=typeof i||(p.borderRadius=i),l&&(p.borderRadius="50%"),void 0!==e&&(p["--base-color"]=e),void 0!==t&&(p["--highlight-color"]=t),"string"==typeof d&&(p["--custom-highlight-background"]=d),p}function y({count:e=1,wrapper:t,className:r,containerClassName:n,containerTestId:i,circle:l=!1,style:o,...a}){var s,d,p;const c=g.useContext(x),u={...a};for(const[e,t]of Object.entries(a))void 0===t&&delete u[e];const h={...c,...u,circle:l},y={...o,...m(h)};let w="react-loading-skeleton";r&&(w+=` ${r}`);const j=null!==(s=h.inline)&&void 0!==s&&s,b=[],f=Math.ceil(e);for(let t=0;t<f;t++){let r=y;if(f>e&&t===f-1){const t=null!==(d=r.width)&&void 0!==d?d:"100%",n=e%1,i="number"==typeof t?t*n:`calc(${t} * ${n})`;r={...r,width:i}}const n=g.createElement("span",{className:w,style:r,key:t},"â€Œ");j?b.push(n):b.push(g.createElement(g.Fragment,{key:t},n,g.createElement("br",null)))}return g.createElement("span",{className:n,"data-testid":i,"aria-live":"polite","aria-busy":null!==(p=h.enableAnimation)&&void 0!==p?p:_},t?b.map(((e,r)=>g.createElement(t,{key:r},e))):b)}const w=function(){return(0,n.jsx)(o.Card,{size:"small",children:(0,n.jsx)(o.CardBody,{children:(0,n.jsxs)(o.__experimentalVStack,{justify:"space-between",spacing:4,style:{height:"100%"},children:[(0,n.jsxs)(o.__experimentalHStack,{expanded:!0,spacing:8,children:[(0,n.jsx)(y,{width:70,height:70,style:{borderRadius:"4px"}}),(0,n.jsx)(o.__experimentalVStack,{style:{width:"100%"},children:(0,n.jsx)(y,{height:20,width:"60%"})})]}),(0,n.jsx)(y,{height:16,width:"90%"}),(0,n.jsxs)(o.__experimentalHStack,{justify:"space-between",children:[(0,n.jsx)(y,{containerClassName:"custom-skeleton",height:10,width:"80%"}),(0,n.jsx)(y,{containerClassName:"custom-skeleton",height:10,width:"100%"})]}),(0,n.jsx)(o.__experimentalHStack,{justify:"right",children:(0,n.jsx)(y,{width:80,height:32,style:{borderRadius:"4px"}})})]})})})},j=function(){return(0,n.jsx)(o.Card,{style:{borderRadius:"4px"},children:(0,n.jsxs)(o.CardBody,{style:{padding:0,lineHeight:"0px"},children:[(0,n.jsx)(y,{width:"100%",height:200,style:{borderRadius:"0px"}}),(0,n.jsxs)(o.__experimentalHStack,{spacing:2,align:"center",justify:"space-between",style:{padding:"12px"},children:[(0,n.jsx)(y,{height:16,width:180}),(0,n.jsx)(y,{width:80,height:32})]})]})})};(0,t.registerBlockType)(a.UU,{icon:i,edit:function({attributes:t,setAttributes:r,isSelected:s}){const{themeData:d,options:p}=t,{resource:c,path:u,url:g,slug:x,ref:_}=d,{activate:m,importStarterContent:y}=p,w=(e,t)=>{r({themeData:{...d,[e]:t}})};return(0,n.jsx)("div",{...(0,l.useBlockProps)(),children:(0,n.jsx)(o.Placeholder,{preview:(0,n.jsxs)(o.__experimentalVStack,{style:{width:"100%"},children:[(0,n.jsxs)(o.__experimentalHStack,{justify:"left",align:"center",spacing:3,children:[(0,n.jsx)(o.Icon,{icon:i,size:28,className:"step-icon"}),(0,n.jsxs)(o.__experimentalVStack,{spacing:1,children:[(0,n.jsx)(o.__experimentalText,{upperCase:!0,size:12,weight:500,color:"#949494",children:a.DD}),!s&&(0,n.jsx)(o.__experimentalText,{weight:600,children:`${c} > ${(e=>{switch(e){case"url":return g;case"vfs":return u;case"git:directory":return`${_||"latest"}${u?` > ${u}`:""}`;default:return x}})(c)||"undefined"} > ${m?(0,e.__)("Activate","wp-playground-blueprint-editor"):(0,e.__)("Install and keep Inactive","wp-playground-blueprint-editor")} > ${y?(0,e.__)("with","wp-playground-blueprint-editor"):(0,e.__)("without","wp-playground-blueprint-editor")} ${(0,e.__)("starter content","wp-playground-blueprint-editor")}`})]})]}),s&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(o.__experimentalToggleGroupControl,{label:(0,e.__)("Resource","wp-playground-blueprint-editor"),__nextHasNoMarginBottom:!0,value:c,isBlock:!0,onChange:e=>{let t={resource:e};"vfs"===e?t.path="":"url"===e?t.url="":"wordpress.org/themes"===e?t.slug="":"git:directory"===e&&(t.ref="",t.path="",t.url=""),r({themeData:t})},children:[(0,n.jsx)(o.__experimentalToggleGroupControlOption,{value:"url",label:(0,e.__)("URL","wp-playground-blueprint-editor")}),(0,n.jsx)(o.__experimentalToggleGroupControlOption,{value:"wordpress.org/themes",label:(0,e.__)("Theme","wp-playground-blueprint-editor")}),(0,n.jsx)(o.__experimentalToggleGroupControlOption,{value:"vfs",label:(0,e.__)("VFS","wp-playground-blueprint-editor")}),(0,n.jsx)(o.__experimentalToggleGroupControlOption,{value:"git:directory",label:(0,e.__)("Git Directory","wp-playground-blueprint-editor")})]}),"vfs"===c&&(0,n.jsx)(o.TextControl,{label:(0,e.__)("Path","wp-playground-blueprint-editor"),__next40pxDefaultSize:!0,value:u,placeholder:(0,e.__)("Enter the file path for the theme ZIP","wp-playground-blueprint-editor"),onChange:e=>w("path",e)}),("url"===c||"git:directory"===c)&&(0,n.jsx)(o.TextControl,{label:(0,e.__)("Url","wp-playground-blueprint-editor"),__next40pxDefaultSize:!0,value:g,placeholder:(0,e.__)("git:directory"===c?"Enter Repository URL (https://, ssh git@..., etc.)":"Enter the URL of the theme ZIP file","wp-playground-blueprint-editor"),onChange:e=>w("url",e)}),"wordpress.org/themes"===c&&(0,n.jsx)(o.__experimentalInputControl,{style:{width:"100%",paddingBottom:"8px"},label:(0,e.__)("Slug","wp-playground-blueprint-editor"),__next40pxDefaultSize:!0,value:x,placeholder:(0,e.__)("Enter theme slug","wp-playground-blueprint-editor"),onChange:e=>w("slug",e),suffix:(0,n.jsx)(h,{type:"themes",onSelect:e=>w("slug",e),text:(0,e.__)("Picker","wp-playground-blueprint-editor")})}),"git:directory"===c&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(o.TextControl,{label:(0,e.__)("Reference (Optional branch, tag, or commit SHA)","wp-playground-blueprint-editor"),__next40pxDefaultSize:!0,value:_,placeholder:(0,e.__)("Enter the git reference (branch, tag, or commit SHA)","wp-playground-blueprint-editor"),onChange:e=>w("ref",e)}),(0,n.jsx)(o.TextControl,{label:(0,e.__)("Directory Path (Optional subdirectory inside the repository)","wp-playground-blueprint-editor"),__next40pxDefaultSize:!0,value:u,placeholder:(0,e.__)("Enter the directory path inside the repository","wp-playground-blueprint-editor"),onChange:e=>w("path",e)})]}),(0,n.jsx)(o.ToggleControl,{label:(0,e.__)("Activate","wp-playground-blueprint-editor"),checked:m,onChange:()=>r({options:{...p,activate:!m}})}),(0,n.jsx)(o.ToggleControl,{label:(0,e.__)("Import Starter Content","wp-playground-blueprint-editor"),checked:y,onChange:()=>r({options:{...p,importStarterContent:!y}})})]})]})})})}})})();