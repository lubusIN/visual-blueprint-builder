(()=>{"use strict";const e=window.wp.i18n,t=window.wp.blocks,n=window.wp.primitives,r=window.ReactJSXRuntime,i=(0,r.jsx)(n.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,r.jsx)(n.Path,{d:"M4 20h8v-1.5H4V20zM18.9 3.5c-.6-.6-1.5-.6-2.1 0l-7.2 7.2c-.4-.1-.7 0-1.1.1-.5.2-1.5.7-1.9 2.2-.4 1.7-.8 2.2-1.1 2.7-.1.1-.2.3-.3.4l-.6 1.1H6c2 0 3.4-.4 4.7-1.4.8-.6 1.2-1.4 1.3-2.3 0-.3 0-.5-.1-.7L19 5.7c.5-.6.5-1.6-.1-2.2zM9.7 14.7c-.7.5-1.5.8-2.4 1 .2-.5.5-1.2.8-2.3.2-.6.4-1 .8-1.1.5-.1 1 .1 1.3.3.2.2.3.5.2.8 0 .3-.1.9-.7 1.3z"})}),l=window.wp.blockEditor,s=window.wp.components,a=JSON.parse('{"UU":"playground-step/install-theme","DD":"Install Theme"}'),o=window.wp.htmlEntities,d=window.wp.element,c=(0,r.jsx)(n.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,r.jsx)(n.Path,{d:"M13 5c-3.3 0-6 2.7-6 6 0 1.4.5 2.7 1.3 3.7l-3.8 3.8 1.1 1.1 3.8-3.8c1 .8 2.3 1.3 3.7 1.3 3.3 0 6-2.7 6-6S16.3 5 13 5zm0 10.5c-2.5 0-4.5-2-4.5-4.5s2-4.5 4.5-4.5 4.5 2 4.5 4.5-2 4.5-4.5 4.5z"})}),p=({item:t,onSelect:n,selectedSlug:i})=>{const l=i===t.slug;return(0,r.jsx)(s.Card,{size:"small",children:(0,r.jsxs)(s.CardBody,{style:{padding:"0"},children:[(0,r.jsx)(s.CardMedia,{children:(0,r.jsx)("img",{src:t.screenshot_url})}),(0,r.jsx)(s.CardBody,{children:(0,r.jsxs)(s.__experimentalHStack,{align:"center",children:[(0,r.jsx)(s.__experimentalHeading,{level:5,children:t.name}),(0,r.jsx)(s.Button,{variant:l?"primary":"secondary",style:{borderRadius:"4px"},onClick:()=>n(t.slug),disabled:l,children:l?(0,e.__)("Selected","wp-playground-blueprint-editor"):(0,e.__)("Select","wp-playground-blueprint-editor")})]})})]})},t.slug)},u=({item:t,onSelect:n,selectedSlug:i})=>{const l=i===t.slug;return(0,r.jsx)(s.Card,{size:"small",children:(0,r.jsx)(s.CardBody,{style:{height:"100%"},children:(0,r.jsxs)(s.__experimentalVStack,{justify:"space-between",spacing:4,style:{height:"100%"},children:[(0,r.jsxs)(s.__experimentalVStack,{spacing:4,children:[(0,r.jsxs)(s.__experimentalHStack,{justify:"start",spacing:4,children:[(0,r.jsx)("img",{src:t.icons["1x"]||t.icons.default,alt:`${t.name} Icon`,style:{minWidth:"70px",maxHeight:"70px",objectFit:"contain",borderRadius:"4px"}}),(0,r.jsx)(s.ExternalLink,{href:t.homepage,style:{fontWeight:"bold",color:"#0073aa"},children:(0,o.decodeEntities)(t.name)})]}),(0,r.jsx)(s.__experimentalText,{lineHeight:"1.5em",children:t.short_description||(0,e.__)("No description available","wp-playground-blueprint-editor")}),(0,r.jsxs)(s.__experimentalHStack,{spacing:10,children:[(0,r.jsx)(s.__experimentalText,{color:"#666",children:t.active_installs?`${a=t.active_installs,a>=1e6?a/1e6+"M":a>=1e3?a/1e3+"K":new Intl.NumberFormat("en-IN").format(a)}+ active installations`:(0,e.__)("No data available","wp-playground-blueprint-editor")}),(0,r.jsxs)(s.__experimentalText,{color:"#666",children:[(0,e.__)("Tested with","wp-playground-blueprint-editor")," ",t.tested||(0,e.__)("Unknown","wp-playground-blueprint-editor")]})]})]}),(0,r.jsx)(s.__experimentalHStack,{justify:"right",children:(0,r.jsx)(s.Button,{variant:l?"primary":"secondary",style:{borderRadius:"4px"},onClick:()=>n(t.slug),disabled:l,children:l?(0,e.__)("Selected","wp-playground-blueprint-editor"):(0,e.__)("Select","wp-playground-blueprint-editor")})})]})})},t.slug);var a},h=function({type:t,onSelect:n,selectedSlug:i}){const[l,a]=(0,d.useState)(!1),[o,h]=(0,d.useState)(""),[g,x]=(0,d.useState)([]),[_,m]=(0,d.useState)([]),[w,b]=(0,d.useState)(!1),f=async(e="")=>{b(!0);const n=!!e.trim(),r=`https://api.wordpress.org/${t}/info/1.2/?action=query_${t}${n?`&request[search]=${e}`:"&request[popular]=1"}`;try{const e=await fetch(r),i=await e.json();n?x(i[t]||[]):m(i[t]||[])}catch(e){console.error(`Error fetching ${t}:`,e)}finally{b(!1)}};(0,d.useEffect)((()=>{l&&!o&&f()}),[l,o]);const S=e=>{n(e),a(!1)};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(s.Button,{variant:"secondary",size:"compact",onClick:()=>a(!0),style:{boxShadow:"none"},children:(0,e.__)("Browse","wp-playground-blueprint-editor")}),l&&(0,r.jsx)(s.Modal,{title:(0,e.__)(`Browse ${t[0].toUpperCase()}${t.slice(1)}`,"wp-playground-blueprint-editor"),onRequestClose:()=>a(!1),shouldCloseOnClickOutside:!1,size:"large",style:{height:"70%"},children:(0,r.jsxs)(s.__experimentalVStack,{spacing:6,justify:"space-between",children:[(0,r.jsx)(s.__experimentalInputControl,{__next40pxDefaultSize:!0,placeholder:(0,e.__)("Search by name or author","wp-playground-blueprint-editor"),value:o,onChange:e=>{h(e),f(e)},suffix:(0,r.jsx)(s.Button,{variant:"link",onClick:()=>f(o),disabled:w,style:{textDecoration:"none",color:"#0073aa"},icon:c})}),(0,r.jsx)(s.__experimentalVStack,{children:w?(0,r.jsx)(s.__experimentalGrid,{columns:2,gap:5,children:Array.from({length:4}).map(((e,n)=>"themes"===t?(0,r.jsx)(j,{},n):(0,r.jsx)(y,{},n)))}):(0,r.jsx)(s.__experimentalGrid,{columns:2,gap:5,children:(o?g:_).map((e=>"themes"===t?(0,r.jsx)(p,{item:e,onSelect:S,selectedSlug:i},e.slug):(0,r.jsx)(u,{item:e,onSelect:S,selectedSlug:i},e.slug)))})})]})})]})},g=window.React,x=g.createContext({}),_=!0;function m({baseColor:e,highlightColor:t,width:n,height:r,borderRadius:i,circle:l,direction:s,duration:a,enableAnimation:o=_,customHighlightBackground:d}){const c={};return"rtl"===s&&(c["--animation-direction"]="reverse"),"number"==typeof a&&(c["--animation-duration"]=`${a}s`),o||(c["--pseudo-element-display"]="none"),"string"!=typeof n&&"number"!=typeof n||(c.width=n),"string"!=typeof r&&"number"!=typeof r||(c.height=r),"string"!=typeof i&&"number"!=typeof i||(c.borderRadius=i),l&&(c.borderRadius="50%"),void 0!==e&&(c["--base-color"]=e),void 0!==t&&(c["--highlight-color"]=t),"string"==typeof d&&(c["--custom-highlight-background"]=d),c}function w({count:e=1,wrapper:t,className:n,containerClassName:r,containerTestId:i,circle:l=!1,style:s,...a}){var o,d,c;const p=g.useContext(x),u={...a};for(const[e,t]of Object.entries(a))void 0===t&&delete u[e];const h={...p,...u,circle:l},w={...s,...m(h)};let y="react-loading-skeleton";n&&(y+=` ${n}`);const j=null!==(o=h.inline)&&void 0!==o&&o,b=[],f=Math.ceil(e);for(let t=0;t<f;t++){let n=w;if(f>e&&t===f-1){const t=null!==(d=n.width)&&void 0!==d?d:"100%",r=e%1,i="number"==typeof t?t*r:`calc(${t} * ${r})`;n={...n,width:i}}const r=g.createElement("span",{className:y,style:n,key:t},"â€Œ");j?b.push(r):b.push(g.createElement(g.Fragment,{key:t},r,g.createElement("br",null)))}return g.createElement("span",{className:r,"data-testid":i,"aria-live":"polite","aria-busy":null!==(c=h.enableAnimation)&&void 0!==c?c:_},t?b.map(((e,n)=>g.createElement(t,{key:n},e))):b)}const y=function(){return(0,r.jsx)(s.Card,{size:"small",children:(0,r.jsx)(s.CardBody,{children:(0,r.jsxs)(s.__experimentalVStack,{justify:"space-between",spacing:4,style:{height:"100%"},children:[(0,r.jsxs)(s.__experimentalHStack,{expanded:!0,spacing:8,children:[(0,r.jsx)(w,{width:70,height:70,style:{borderRadius:"4px"}}),(0,r.jsx)(s.__experimentalVStack,{style:{width:"100%"},children:(0,r.jsx)(w,{height:20,width:"60%"})})]}),(0,r.jsx)(w,{height:16,width:"90%"}),(0,r.jsxs)(s.__experimentalHStack,{justify:"space-between",children:[(0,r.jsx)(w,{containerClassName:"custom-skeleton",height:10,width:"80%"}),(0,r.jsx)(w,{containerClassName:"custom-skeleton",height:10,width:"100%"})]}),(0,r.jsx)(s.__experimentalHStack,{justify:"right",children:(0,r.jsx)(w,{width:80,height:32,style:{borderRadius:"4px"}})})]})})})},j=function(){return(0,r.jsx)(s.Card,{style:{borderRadius:"4px"},children:(0,r.jsxs)(s.CardBody,{style:{padding:0,lineHeight:"0px"},children:[(0,r.jsx)(w,{width:"100%",height:200,style:{borderRadius:"0px"}}),(0,r.jsxs)(s.__experimentalHStack,{spacing:2,align:"center",justify:"space-between",style:{padding:"12px"},children:[(0,r.jsx)(w,{height:16,width:180}),(0,r.jsx)(w,{width:80,height:32})]})]})})};(0,t.registerBlockType)(a.UU,{icon:i,edit:function({attributes:t,setAttributes:n,isSelected:o}){const{themeData:d,options:c}=t,{resource:p,path:u,url:g,slug:x}=d,{activate:_,importStarterContent:m}=c,w=(e,t)=>{n({themeData:{...d,[e]:t}})};return(0,r.jsx)("div",{...(0,l.useBlockProps)(),children:(0,r.jsx)(s.Placeholder,{preview:(0,r.jsxs)(s.__experimentalVStack,{style:{width:"100%"},children:[(0,r.jsxs)(s.__experimentalHStack,{justify:"left",align:"center",spacing:3,children:[(0,r.jsx)(s.Icon,{icon:i,size:28,className:"step-icon"}),(0,r.jsxs)(s.__experimentalVStack,{spacing:1,children:[(0,r.jsx)(s.__experimentalText,{upperCase:!0,size:12,weight:500,color:"#949494",children:a.DD}),!o&&(0,r.jsx)(s.__experimentalText,{weight:600,children:`${p} > ${(e=>{switch(e){case"url":return g;case"vfs":return u;default:return x}})(p)||"undefined"} > ${_?(0,e.__)("Activate","wp-playground-blueprint-editor"):(0,e.__)("Install and keep Inactive","wp-playground-blueprint-editor")} > ${m?(0,e.__)("with","wp-playground-blueprint-editor"):(0,e.__)("without","wp-playground-blueprint-editor")} ${(0,e.__)("starter content","wp-playground-blueprint-editor")}`})]})]}),o&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(s.__experimentalToggleGroupControl,{label:(0,e.__)("Resource","wp-playground-blueprint-editor"),value:p,isBlock:!0,onChange:e=>{let t={resource:e};"vfs"===e?t.path=d.path||"":"url"===e?t.url=d.url||"":"wordpress.org/themes"===e&&(t.slug=d.slug||""),n({themeData:t})},children:[(0,r.jsx)(s.__experimentalToggleGroupControlOption,{value:"url",label:(0,e.__)("URL","wp-playground-blueprint-editor")}),(0,r.jsx)(s.__experimentalToggleGroupControlOption,{value:"wordpress.org/themes",label:(0,e.__)("Theme","wp-playground-blueprint-editor")}),(0,r.jsx)(s.__experimentalToggleGroupControlOption,{value:"vfs",label:(0,e.__)("VFS","wp-playground-blueprint-editor")})]}),"vfs"===p&&(0,r.jsx)(s.TextControl,{label:(0,e.__)("Path","wp-playground-blueprint-editor"),value:u,placeholder:(0,e.__)("Enter the file path for the theme ZIP","wp-playground-blueprint-editor"),onChange:e=>w("path",e)}),"url"===p&&(0,r.jsx)(s.TextControl,{label:(0,e.__)("Url","wp-playground-blueprint-editor"),value:g,placeholder:(0,e.__)("Enter the URL of the theme ZIP file","wp-playground-blueprint-editor"),onChange:e=>w("url",e)}),"wordpress.org/themes"===p&&(0,r.jsx)(s.__experimentalInputControl,{style:{width:"100%",paddingBottom:"8px"},label:(0,e.__)("Slug","wp-playground-blueprint-editor"),value:x,placeholder:(0,e.__)("Enter theme slug","wp-playground-blueprint-editor"),onChange:e=>w("slug",e),suffix:(0,r.jsx)(h,{type:"themes",onSelect:e=>w("slug",e),text:(0,e.__)("Picker","wp-playground-blueprint-editor")})}),(0,r.jsx)(s.ToggleControl,{label:(0,e.__)("Activate","wp-playground-blueprint-editor"),checked:_,onChange:()=>n({options:{...c,activate:!_}})}),(0,r.jsx)(s.ToggleControl,{label:(0,e.__)("Import Starter Content","wp-playground-blueprint-editor"),checked:m,onChange:()=>n({options:{...c,importStarterContent:!m}})})]})]})})})}})})();