(()=>{"use strict";const e=window.wp.i18n,t=window.wp.blocks,i=window.wp.primitives,r=window.ReactJSXRuntime,n=(0,r.jsx)(i.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,r.jsx)(i.Path,{d:"M10.5 4v4h3V4H15v4h1.5a1 1 0 011 1v4l-3 4v2a1 1 0 01-1 1h-3a1 1 0 01-1-1v-2l-3-4V9a1 1 0 011-1H9V4h1.5zm.5 12.5v2h2v-2l3-4v-3H8v3l3 4z"})}),l=window.wp.blockEditor,a=window.wp.components,s=JSON.parse('{"UU":"playground-step/install-plugin","DD":"Install Plugin"}'),o=window.wp.htmlEntities,p=window.wp.element,d=(0,r.jsx)(i.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,r.jsx)(i.Path,{d:"M13 5c-3.3 0-6 2.7-6 6 0 1.4.5 2.7 1.3 3.7l-3.8 3.8 1.1 1.1 3.8-3.8c1 .8 2.3 1.3 3.7 1.3 3.3 0 6-2.7 6-6S16.3 5 13 5zm0 10.5c-2.5 0-4.5-2-4.5-4.5s2-4.5 4.5-4.5 4.5 2 4.5 4.5-2 4.5-4.5 4.5z"})}),c=({item:t,onSelect:i,selectedSlug:n})=>{const l=n===t.slug;return(0,r.jsx)(a.Card,{size:"small",children:(0,r.jsxs)(a.CardBody,{style:{padding:"0"},children:[(0,r.jsx)(a.CardMedia,{children:(0,r.jsx)("img",{src:t.screenshot_url})}),(0,r.jsx)(a.CardBody,{children:(0,r.jsxs)(a.__experimentalHStack,{align:"center",children:[(0,r.jsx)(a.__experimentalHeading,{level:5,children:t.name}),(0,r.jsx)(a.Button,{variant:l?"primary":"secondary",style:{borderRadius:"4px"},onClick:()=>i(t.slug),disabled:l,children:l?(0,e.__)("Selected","wp-playground-blueprint-editor"):(0,e.__)("Select","wp-playground-blueprint-editor")})]})})]})},t.slug)},u=({item:t,onSelect:i,selectedSlug:n})=>{const l=n===t.slug;return(0,r.jsx)(a.Card,{size:"small",children:(0,r.jsx)(a.CardBody,{style:{height:"100%"},children:(0,r.jsxs)(a.__experimentalVStack,{justify:"space-between",spacing:4,style:{height:"100%"},children:[(0,r.jsxs)(a.__experimentalVStack,{spacing:4,children:[(0,r.jsxs)(a.__experimentalHStack,{justify:"start",spacing:4,children:[(0,r.jsx)("img",{src:t.icons["1x"]||t.icons.default,alt:`${t.name} Icon`,style:{minWidth:"70px",maxHeight:"70px",objectFit:"contain",borderRadius:"4px"}}),(0,r.jsx)(a.ExternalLink,{href:t.homepage,style:{fontWeight:"bold",color:"#0073aa"},children:(0,o.decodeEntities)(t.name)})]}),(0,r.jsx)(a.__experimentalText,{lineHeight:"1.5em",children:t.short_description||(0,e.__)("No description available","wp-playground-blueprint-editor")}),(0,r.jsxs)(a.__experimentalHStack,{spacing:10,children:[(0,r.jsx)(a.__experimentalText,{color:"#666",children:t.active_installs?`${s=t.active_installs,s>=1e6?s/1e6+"M":s>=1e3?s/1e3+"K":new Intl.NumberFormat("en-IN").format(s)}+ active installations`:(0,e.__)("No data available","wp-playground-blueprint-editor")}),(0,r.jsxs)(a.__experimentalText,{color:"#666",children:[(0,e.__)("Tested with","wp-playground-blueprint-editor")," ",t.tested||(0,e.__)("Unknown","wp-playground-blueprint-editor")]})]})]}),(0,r.jsx)(a.__experimentalHStack,{justify:"right",children:(0,r.jsx)(a.Button,{variant:l?"primary":"secondary",style:{borderRadius:"4px"},onClick:()=>i(t.slug),disabled:l,children:l?(0,e.__)("Selected","wp-playground-blueprint-editor"):(0,e.__)("Select","wp-playground-blueprint-editor")})})]})})},t.slug);var s},h=function({type:t,onSelect:i,selectedSlug:n}){const[l,s]=(0,p.useState)(!1),[o,h]=(0,p.useState)(""),[g,x]=(0,p.useState)([]),[_,m]=(0,p.useState)([]),[y,b]=(0,p.useState)(!1),f=async(e="")=>{b(!0);const i=!!e.trim(),r=`https://api.wordpress.org/${t}/info/1.2/?action=query_${t}${i?`&request[search]=${e}`:"&request[popular]=1"}`;try{const e=await fetch(r),n=await e.json();i?x(n[t]||[]):m(n[t]||[])}catch(e){console.error(`Error fetching ${t}:`,e)}finally{b(!1)}};(0,p.useEffect)((()=>{l&&!o&&f()}),[l,o]);const v=e=>{i(e),s(!1)};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(a.Button,{variant:"secondary",size:"compact",onClick:()=>s(!0),style:{boxShadow:"none"},children:(0,e.__)("Browse","wp-playground-blueprint-editor")}),l&&(0,r.jsx)(a.Modal,{title:(0,e.__)(`Browse ${t[0].toUpperCase()}${t.slice(1)}`,"wp-playground-blueprint-editor"),onRequestClose:()=>s(!1),shouldCloseOnClickOutside:!1,size:"large",style:{height:"70%"},children:(0,r.jsxs)(a.__experimentalVStack,{spacing:6,justify:"space-between",children:[(0,r.jsx)(a.__experimentalInputControl,{__next40pxDefaultSize:!0,placeholder:(0,e.__)("Search by name or author","wp-playground-blueprint-editor"),value:o,onChange:e=>{h(e),f(e)},suffix:(0,r.jsx)(a.Button,{variant:"link",onClick:()=>f(o),disabled:y,style:{textDecoration:"none",color:"#0073aa"},icon:d})}),(0,r.jsx)(a.__experimentalVStack,{children:y?(0,r.jsx)(a.__experimentalGrid,{columns:2,gap:5,children:Array.from({length:4}).map(((e,i)=>"themes"===t?(0,r.jsx)(j,{},i):(0,r.jsx)(w,{},i)))}):(0,r.jsx)(a.__experimentalGrid,{columns:2,gap:5,children:(o?g:_).map((e=>"themes"===t?(0,r.jsx)(c,{item:e,onSelect:v,selectedSlug:n},e.slug):(0,r.jsx)(u,{item:e,onSelect:v,selectedSlug:n},e.slug)))})})]})})]})},g=window.React,x=g.createContext({}),_=!0;function m({baseColor:e,highlightColor:t,width:i,height:r,borderRadius:n,circle:l,direction:a,duration:s,enableAnimation:o=_,customHighlightBackground:p}){const d={};return"rtl"===a&&(d["--animation-direction"]="reverse"),"number"==typeof s&&(d["--animation-duration"]=`${s}s`),o||(d["--pseudo-element-display"]="none"),"string"!=typeof i&&"number"!=typeof i||(d.width=i),"string"!=typeof r&&"number"!=typeof r||(d.height=r),"string"!=typeof n&&"number"!=typeof n||(d.borderRadius=n),l&&(d.borderRadius="50%"),void 0!==e&&(d["--base-color"]=e),void 0!==t&&(d["--highlight-color"]=t),"string"==typeof p&&(d["--custom-highlight-background"]=p),d}function y({count:e=1,wrapper:t,className:i,containerClassName:r,containerTestId:n,circle:l=!1,style:a,...s}){var o,p,d;const c=g.useContext(x),u={...s};for(const[e,t]of Object.entries(s))void 0===t&&delete u[e];const h={...c,...u,circle:l},y={...a,...m(h)};let w="react-loading-skeleton";i&&(w+=` ${i}`);const j=null!==(o=h.inline)&&void 0!==o&&o,b=[],f=Math.ceil(e);for(let t=0;t<f;t++){let i=y;if(f>e&&t===f-1){const t=null!==(p=i.width)&&void 0!==p?p:"100%",r=e%1,n="number"==typeof t?t*r:`calc(${t} * ${r})`;i={...i,width:n}}const r=g.createElement("span",{className:w,style:i,key:t},"â€Œ");j?b.push(r):b.push(g.createElement(g.Fragment,{key:t},r,g.createElement("br",null)))}return g.createElement("span",{className:r,"data-testid":n,"aria-live":"polite","aria-busy":null!==(d=h.enableAnimation)&&void 0!==d?d:_},t?b.map(((e,i)=>g.createElement(t,{key:i},e))):b)}const w=function(){return(0,r.jsx)(a.Card,{size:"small",children:(0,r.jsx)(a.CardBody,{children:(0,r.jsxs)(a.__experimentalVStack,{justify:"space-between",spacing:4,style:{height:"100%"},children:[(0,r.jsxs)(a.__experimentalHStack,{expanded:!0,spacing:8,children:[(0,r.jsx)(y,{width:70,height:70,style:{borderRadius:"4px"}}),(0,r.jsx)(a.__experimentalVStack,{style:{width:"100%"},children:(0,r.jsx)(y,{height:20,width:"60%"})})]}),(0,r.jsx)(y,{height:16,width:"90%"}),(0,r.jsxs)(a.__experimentalHStack,{justify:"space-between",children:[(0,r.jsx)(y,{containerClassName:"custom-skeleton",height:10,width:"80%"}),(0,r.jsx)(y,{containerClassName:"custom-skeleton",height:10,width:"100%"})]}),(0,r.jsx)(a.__experimentalHStack,{justify:"right",children:(0,r.jsx)(y,{width:80,height:32,style:{borderRadius:"4px"}})})]})})})},j=function(){return(0,r.jsx)(a.Card,{style:{borderRadius:"4px"},children:(0,r.jsxs)(a.CardBody,{style:{padding:0,lineHeight:"0px"},children:[(0,r.jsx)(y,{width:"100%",height:200,style:{borderRadius:"0px"}}),(0,r.jsxs)(a.__experimentalHStack,{spacing:2,align:"center",justify:"space-between",style:{padding:"12px"},children:[(0,r.jsx)(y,{height:16,width:180}),(0,r.jsx)(y,{width:80,height:32})]})]})})};(0,t.registerBlockType)(s.UU,{icon:n,edit:function({attributes:t,setAttributes:i,isSelected:o}){const{pluginData:p,options:d}=t,{resource:c,path:u,url:g,slug:x,ref:_}=p,{activate:m}=d,y=(e,t)=>{i({pluginData:{...p,[e]:t}})};return(0,r.jsx)("div",{...(0,l.useBlockProps)(),children:(0,r.jsx)(a.Placeholder,{preview:(0,r.jsxs)(a.__experimentalVStack,{style:{width:"100%"},children:[(0,r.jsxs)(a.__experimentalHStack,{justify:"left",align:"center",spacing:3,children:[(0,r.jsx)(a.Icon,{icon:n,size:28,className:"step-icon"}),(0,r.jsxs)(a.__experimentalVStack,{spacing:1,children:[(0,r.jsx)(a.__experimentalText,{upperCase:!0,size:12,weight:500,color:"#949494",children:s.DD}),!o&&(0,r.jsx)(a.__experimentalText,{weight:600,children:`${c} > ${(e=>{switch(e){case"url":return g;case"vfs":return u;case"git:directory":return u?`${u} (Ref: ${_||"default branch"})`:_?`Ref: ${_}`:"Git Repository";default:return x}})(c)} > ${m?(0,e.__)("Activate","wp-playground-blueprint-editor"):(0,e.__)("Install and keep Inactive","wp-playground-blueprint-editor")}`})]})]}),o&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(a.__experimentalToggleGroupControl,{label:(0,e.__)("Resource","wp-playground-blueprint-editor"),__nextHasNoMarginBottom:!0,value:c,isBlock:!0,onChange:e=>{let t={resource:e};"vfs"===e?t.path="":"url"===e?t.url="":"wordpress.org/plugins"===e?t.slug="":"git:directory"===e&&(t.ref="",t.path="",t.url=""),i({pluginData:t})},children:[(0,r.jsx)(a.__experimentalToggleGroupControlOption,{value:"url",label:(0,e.__)("URL","wp-playground-blueprint-editor")}),(0,r.jsx)(a.__experimentalToggleGroupControlOption,{value:"wordpress.org/plugins",label:(0,e.__)("Plugin","wp-playground-blueprint-editor")}),(0,r.jsx)(a.__experimentalToggleGroupControlOption,{value:"vfs",label:(0,e.__)("VFS","wp-playground-blueprint-editor")}),(0,r.jsx)(a.__experimentalToggleGroupControlOption,{value:"git:directory",label:(0,e.__)("Git Directory","wp-playground-blueprint-editor")})]}),"vfs"===c&&(0,r.jsx)(a.TextControl,{label:(0,e.__)("Path","wp-playground-blueprint-editor"),__next40pxDefaultSize:!0,value:u,placeholder:(0,e.__)("Enter the file path for the plugin ZIP","wp-playground-blueprint-editor"),onChange:e=>y("path",e)}),("url"===c||"git:directory"===c)&&(0,r.jsx)(a.TextControl,{label:(0,e.__)("Url","wp-playground-blueprint-editor"),__next40pxDefaultSize:!0,value:g,placeholder:(0,e.__)("git:directory"===c?"Enter Repository URL (https://, ssh git@..., etc.)":"Enter the URL of the plugin ZIP file","wp-playground-blueprint-editor"),onChange:e=>y("url",e)}),"wordpress.org/plugins"===c&&(0,r.jsx)(a.__experimentalInputControl,{style:{width:"100%",paddingBottom:"8px"},__next40pxDefaultSize:!0,label:(0,e.__)("Slug","wp-playground-blueprint-editor"),value:x,placeholder:(0,e.__)("Enter plugin slug","wp-playground-blueprint-editor"),onChange:e=>y("slug",e),suffix:(0,r.jsx)(h,{type:"plugins",onSelect:e=>y("slug",e)})}),"git:directory"===c&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(a.TextControl,{label:(0,e.__)("Reference (Optional branch, tag, or commit SHA)","wp-playground-blueprint-editor"),__next40pxDefaultSize:!0,value:_,placeholder:(0,e.__)("Enter the git reference (branch, tag, or commit SHA)","wp-playground-blueprint-editor"),onChange:e=>y("ref",e)}),(0,r.jsx)(a.TextControl,{label:(0,e.__)("Directory Path (Optional subdirectory inside the repository)","wp-playground-blueprint-editor"),__next40pxDefaultSize:!0,value:u,placeholder:(0,e.__)("Enter the directory path inside the repository","wp-playground-blueprint-editor"),onChange:e=>y("path",e)})]}),(0,r.jsx)(a.ToggleControl,{label:(0,e.__)("Activate","wp-playground-blueprint-editor"),checked:m,onChange:()=>i({options:{activate:!m}})})]})]})})})}})})();